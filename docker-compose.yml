services:
  web:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: cdattg-gibse-web
    restart: unless-stopped
    environment:
      - APACHE_DOCUMENT_ROOT=/var/www/html
    networks:
      - cdattg-gibse-network
    # Perfil de desarrollo: puerto 8080 y volúmenes para hot-reload
    profiles:
      - dev
    ports:
      - "8080:80"
    volumes:
      - .:/var/www/html

  web-prod:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: cdattg-gibse-web
    restart: unless-stopped
    environment:
      - APACHE_DOCUMENT_ROOT=/var/www/html
    networks:
      - cdattg-gibse-network
    # Perfil de producción: solo localhost, sin volúmenes
    profiles:
      - prod
    ports:
      - "127.0.0.1:80:80"
    # Sin volúmenes en producción (código dentro de la imagen)

networks:
  cdattg-gibse-network:
    driver: bridge
